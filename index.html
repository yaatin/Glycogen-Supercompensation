<!DOCTYPE html>
<html>
	<head>	
		<title>目標熱量計算</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="description" content="啾蒂煩惱於能吃多少食物能跑完全馬不痛以及健康吃健康瘦理念製作的計算菜單">
		<style>
			table, th, td {
			  border: 1px solid black;
			  border-collapse: collapse;
			}	
		</style>
	</head>
	<body>	
		<table> 
			<tr>
				<td>基礎代謝(BMR)</td>
				<td> 
					<input type="text" id="txt_bmr" name="txt_bmr" value="" style="background-color:#FFD382;">					
				</td>
				<td>每日總消耗熱量(TDEE)</td>
				<td>
					<input type="text" id="txt_tdee" name="txt_tdee" value="" style="background-color:#FFD382;">					
					<div id="div_tdee" style="background-color:#FFD382;"></div>
				</td>
			</tr>
			<tr>
				<td>性別</td>
				<td>				
					<input type="radio" id="rdo_gender" name="rdo_gender" value="0" checked>
					<label>女生</label>
					<input type="radio" id="rdo_gender" name="rdo_gender" value="1">
					<label>男生</label>  
				</td>								
				<td rowspan="4">日常活動等級</td>
				<td rowspan="4">					
					<input type="radio" id="rdo_activity_level" name="rdo_activity_level" value="1.2" checked>
					<label>坐著工作 (幾乎不運動)</label><br />
					<input type="radio" id="rdo_activity_level" name="rdo_activity_level" value="1.375">
					<label>偶爾運動 (輕鬆運動每週 1-3 天)</label><br />
					<input type="radio" id="rdo_activity_level" name="rdo_activity_level" value="1.55">
					<label>常常運動 (中強度運動每週 3-5 天)</label><br />
					<input type="radio" id="rdo_activity_level" name="rdo_activity_level" value="1.72">
					<label>每天運動 (高強度運動每週 6-7 天)</label><br />
					<input type="radio" id="rdo_activity_level" name="rdo_activity_level" value="1.9">
					<label>強度運動 (長時間運動或體力勞動工作)</label><br />
				</td></td>
			</tr>
			<tr>
				<td>身高(cm)</td>
				<td>
					<input type="text" id="txt_height" name="txt_height" value="">
				</td>
			</tr>
			<tr>
				<td>體重(kg)</td>
				<td><input type="text" id="txt_weight" name="txt_weight" value=""></td>
			</tr>
			<tr>
				<td>年齡:</td>
				<td><input type="text" id="txt_age" name="txt_age" value=""></td>
			</tr>			
			<tr>
				<td>目標:</td>
				<td>
					<input type="radio" id="rdo_goal" name="rdo_goal" value="1" >
					<label>肝醣超補</label>
					<input type="radio" id="rdo_goal" name="rdo_goal" value="2" checked>
					<label>增肌減脂</label>
				</td>			
			</tr>
			<tr>				
				<td colspan="4"><center><input type="button" id="btn_calculate" name="btn_calculate" value="計算" onclick="calculate()"></center></td>
			</tr>
		</table>
		<br/>		
		<table width="320px">
			<tr>
				<td></td>
				<td>比例</td>
				<td>卡路里</td>
				<td>換算公克</td>
			</tr>
			<tr>
				<td>醣</td>
				<td><div id="div_cho_all_rt"></div></td>
				<td><div id="div_cho_rt"></div></td>
				<td><div id="div_cho_cal"></div></td>
			</tr>
			<tr>
				<td>脂肪</td>
				<td><div id="div_fat_all_rt"></div></td>
				<td><div id="div_fat_rt"></div></td>
				<td><div id="div_fat_cal"></div></td>
			</tr>
			<tr>
				<td>蛋白質</td>
				<td><div id="div_pot_all_rt"></div></td>
				<td><div id="div_pot_rt"></div></td>
				<td><div id="div_pot_cal"></div></td>
			</tr>
		</table>
		<br />
		<div class="notranslate" contenteditable="true" spellcheck="true" placeholder=" " data-content-editable-leaf="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">醣(C) → 脂肪(F) → 蛋白質(P)</div>
	</body>
</html>
<script>	
	var c_cal = 4; 
	var p_cal = 4;
	var f_cal = 9;
	
	var c_rt = 0.4;
	var p_rt = 0.3;
	var f_rt = 0.3;
	
	var BMR;
	var TDEE;
	var protein = 1.6;
	
	function calculate(){	
		//身高
		var height = document.getElementById("txt_height").value;
		//體重
		var weight = document.getElementById("txt_weight").value;
		//年齡
		var age = document.getElementById("txt_age").value;
		//性別
		var gender = document.querySelector('input[name="rdo_gender"]:checked').value;
		//活動度
		var activity_level = document.querySelector('input[name="rdo_activity_level"]:checked').value;
		//目標
		var goal = document.querySelector('input[name="rdo_goal"]:checked').value;
		//基礎代謝
		BMR = 9.99*weight+6.25*height-4.92*age+(166*gender)-161;
		//每日總消耗熱量
		TDEE = BMR*activity_level;		
		
		switch (activity_level) {
		  case "1.2": //幾乎不運動
			protein = 1;
			break;
		  case "1.375": //輕鬆運動每週 1-3 天
			protein = 1.4;
			break;
		  case "1.55": //中強度運動每週 3-5 天
			protein = 1.6;
			break;
		  case "1.72": //高強度運動每週 6-7 天
			protein = 1.8;
			break;
		  case "1.9": //長時間運動或體力勞動工作
			protein = 2;
			break;
		  default:
			protein = 1.6;
			break;
		}
		
		//蛋白質攝取量
		var goal_p_cal = weight*protein*p_cal;
		
		switch (goal) {
			case "1":
				c_rt = 0.7;						
				p_rt = (goal_p_cal/TDEE).toFixed(2);
				f_rt = (1 - c_rt - p_rt).toFixed(2);
				break;
			case "2":
				p_rt = (goal_p_cal/TDEE).toFixed(2);
				f_rt = 0.25;
				c_rt = (1 - f_rt - p_rt).toFixed(2);
				break;
			default:
				break;
		}	
		
		document.getElementById("txt_bmr").value = BMR.toFixed(2);
		document.getElementById("txt_tdee").value = TDEE.toFixed(2);		
		
		document.getElementById("div_cho_all_rt").innerHTML = (c_rt*100).toFixed() + "%";
		document.getElementById("div_fat_all_rt").innerHTML = f_rt*100 + "%";
		document.getElementById("div_pot_all_rt").innerHTML = p_rt*100 + "%";
		
		document.getElementById("div_cho_rt").innerHTML = (TDEE * c_rt).toFixed(2);
		document.getElementById("div_fat_rt").innerHTML = (TDEE * f_rt).toFixed(2);
		document.getElementById("div_pot_rt").innerHTML = goal_p_cal.toFixed(2);
		
		document.getElementById("div_cho_cal").innerHTML = ((TDEE * c_rt)/4).toFixed(2);
		document.getElementById("div_fat_cal").innerHTML = ((TDEE * f_rt)/9).toFixed(2);
		document.getElementById("div_pot_cal").innerHTML = (goal_p_cal/4).toFixed(2);
	}	
</script>
